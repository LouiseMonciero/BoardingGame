const server_url="https://boarding-games-server.vercel.app";async function delete_account(){if(confirm("Etes vous sur(e) de vouloir supprimer ce compte ?")){const e=localStorage.getItem("token"),o=localStorage.getItem("id_user");console.log(o,"fdfd"),e||(alert("Vous n'etes plus connecté, vous allez être redirigé(e) à la page d'accueil"),window.location.href="index.html");try{const t=await fetch(`${server_url}/api/users/${o}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!t.ok)return void console.error("Échec de la suppression du compte :",t.status);200===t.status&&(alert("Votre compte à été supprimé, vous allez être redirigé(e) à la page d'accueil"),localStorage.removeItem("username"),localStorage.removeItem("token"),localStorage.removeItem("id_user"),localStorage.removeItem("level_permission"),window.location.href="index.html")}catch(e){console.error("Erreur réseau ou serveur :",e)}}}!async function(){const e=localStorage.getItem("token"),o=localStorage.getItem("username"),t=localStorage.getItem("username");if(e||(alert("Vous n'etes plus connecté, vous allez être redirigé(e) à l'accueil"),window.location.href="index.html"),!o)try{const o=await fetch(`${server_url}/api/auth/check`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!o.ok)return void console.error("Échec de la vérification :",o.status);const t=await o.json(),{username:r,level_permission:a,id_user:s}=t.data;localStorage.setItem("id_user",s),localStorage.setItem("username",r),localStorage.setItem("level_permission",a)}catch(e){console.error("Erreur réseau ou serveur :",e)}const r=document.getElementById("username");r&&(r.textContent=o),"admin"===t&&console.log("admin")}();